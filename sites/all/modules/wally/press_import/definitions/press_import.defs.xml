<?xml version="1.0" encoding="UTF-8"?>
<!-- 
 *   Correspondence table between Press Content data ("name") and Drupal structure ("content_type").
 *	 Refer to ./packages.xsd file for Press Content structure
 *	 Refer to Drupal for Content types structure and Taxonomy
 -->
<definitions>
	<definition type="list" name="Packages" def="Package">
		<title>Packages</title>
	</definition>

	
	<!-- Packages -->
	<definition type="node" name="Package" dbkey="ExternalReference" content_type="wally_packagetype">
		<title>Generic Package</title>
		<fields>
			<field type="field" name="PackageTitle" content_type="title" />
			<field type="field" name="Language" content_type="language" />
			<field type="field time" name="CreationDate" content_type="created" />
			<field type="field time" name="LastUpdateDate" content_type="changed" />
			<field type="field ccktime" name="EmbargoDate" list="true" content_type="field_wally_embargo_date" />
			<field type="field comment" name="CommentsAllowed" content_type="comment" />
			<field type="field" name="ExternalReference" list="true" array="value" content_type="field_externalreference" />
			<field type="def"   name="Channels" def="Channels" content_type="field_wally_channel" />
			<field type="def"   name="Destinations" def="Destinations" content_type="field_wally_destination" />
		</fields>
	</definition>

	<definition type="extend" name="ArticlePackageType" base="Package" content_type="wally_articlepackagetype">
		<title>Article Package</title>
		<fields>
			<field type="node"  name="MainStory" def="TextObjectType" content_type="field_wally_main_story" />
			<field type="fields" name="EmbeddedContent" def="EmbeddedContent" />
		</fields>
	</definition>


	<!-- Objects -->
	<definition type="node" name="Object" dbkey="ExternalReference" content_type="wally_objecttype">
		<title>Generic Object</title>
		<fields>
			<field type="field" name="Title" content_type="title" />
			<field type="field" name="ExternalReference" list="true" array="value" content_type="field_externalreference" />
			<field type="def"   name="Markers" def="MarkersList" content_type="field_wally_marker" />
			<field type="def"   name="Locations" def="LocationsList" content_type="field_wally_location" />
			<field type="def"   name="Taxonomy" def="TagsTaxonomy" content_type="field_wally_taxonomy" />
		</fields>
	</definition>

	<definition type="extend" name="TextObjectType" base="Object" content_type="wally_textobjecttype">
		<title>Text Object</title>
		<fields>
			<field type="field" name="TextBody" content_type="field_textbody" callback="_press_import_textbody" />
			<field type="field" name="Copyright" content_type="field_copyright" />
			<field type="field" name="TextBarette" content_type="field_texarette" />
			
			<field type="field" name="DocumentType" list="true" array="value" content_type="field_wally_document_type" />
		</fields>
	</definition>

	<definition type="extend" name="MMediaObjectType" base="Object" content_type="wally_photoobjecttype">
		<title>Photo Object</title>
		<fields>
			<field type="field" name="Summary" content_type="body" />
		</fields>
	</definition>

	<definition type="extend" name="PhotoObjectType" base="MMediaObjectType" content_type="wally_photoobjecttype">
		<title>Photo Object</title>
		<fields>
			<field type="file_image" name="FileURI" content_type="field_wally_photo" />
			<field type="def"   name="Crops" def="Crops" content_type="field_wally_crops" />
			<field type="field" name="Caption" list="true" array="value" content_type="field_wally_caption" />
		</fields>
	</definition>


	<!-- Miscellaneous -->
	<definition type="fields" name="EmbeddedContent">
		<title>Embedded Content</title>
		<fields>
			<field type="def"   name="EmbeddedObjects" def="EmbeddedObjects" content_type="field_wally_embedded_obj" />
			<field type="def"   name="LinksLists" def="LinksLists" content_type="field_wally_links_list" />
		</fields>
	</definition>

	<definition type="list" name="EmbeddedObjects" def="ObjectType">
		<title>Objects or Links</title>
	</definition>
	<definition type="field" name="ObjectType">
		<title>Object or Link</title>
		<fields>
			<field type="node"  name="Object" list="true" array="nid" def="Object" />
		</fields>
	</definition>

	<definition type="list" name="LinksLists" def="LinksList">
		<title>Links Lists</title>
	</definition>
	<definition type="node" name="LinksList" dbkey="ExternalReference" content_type="wally_linkslisttype">
		<title>Links List</title>
		<fields>
			<field type="field" name="Title" content_type="title" />
			<field type="field" name="Summary" content_type="body" />
			<field type="field" name="ExternalReference" list="true" array="value" content_type="field_externalreference" />
		</fields>
	</definition>

	<definition type="list" name="Channels" def="Channel">
		<title>Channels</title>
	</definition>
	<definition type="field" name="Channel">
		<title>Product Channel</title>
		<fields>
			<field type="field" name="Name" array="value" callback="_press_import_taxonomy">
				<parameters>
					<parameter>press_import_taxonomy_channel</parameter>
				</parameters>
			</field>
		</fields>
	</definition>

	<definition type="list" name="Destinations" def="Destination" array="value" callback="serialize">
		<title>Destinations</title>
	</definition>
	<definition type="field" name="Destination">
		<title>Product Destination</title>
		<fields>
			<field type="field" name="DestinationPath" array="DestinationPath" />
			<field type="field" name="DestinationID" array="DestinationID" />
		</fields>
	</definition>

	<definition type="list" name="MarkersList" def="MarkerItem" array="nid">
		<title>Markers List</title>
	</definition>
	<definition type="node" name="MarkerItem" dbkey="LocationID" content_type="wally_locationitem">
		<title>Marker Item</title>
		<fields>
			<field type="field" name="LocationName" content_type="title" />
			<field type="field" name="Address" list="true" content_type="field_wally_address" callback="_press_import_location" />
			<field type="taxonomy" name="LocationID" vocabulary="press_import_taxonomy_location" list="true" content_type="taxonomy" />
		</fields>
	</definition>

	<definition type="list" name="LocationsList" def="LocationItem" array="value">
		<title>Locations List</title>
	</definition>
	<definition type="field" name="LocationItem">
		<title>Location Item</title>
		<fields>
			<field type="field" name="LocationName" callback="_press_import_taxonomy_location" single="true" />
		</fields>
	</definition>

	<definition type="list" name="TagsTaxonomy" def="TagsTaxonomyItem">
		<title>Tags Taxonomy List</title>
	</definition>
	<definition type="field" name="TagsTaxonomyItem">
		<title>Tags Taxonomy Item</title>
		<fields>
			<field type="field" name="Term" array="value" callback="_press_import_taxonomy_tags">
				<parameters>
					<parameter>press_import_taxonomy_tags</parameter>
				</parameters>
			</field>
		</fields>
	</definition>

	<definition type="list" name="Crops" def="Crop" array="value" callback="_press_import_crop">
		<title>Crops</title>
	</definition>
	<definition type="field" name="Crop">
		<title>Crop</title>
		<fields>
			<field type="field" name="Type" array="crop_type" />
			<field type="field" name="X" array="crop_x" />
			<field type="field" name="Y" array="crop_y" />
			<field type="field" name="H" array="crop_h" />
			<field type="field" name="W" array="crop_w" />
		</fields>
	</definition>
	
</definitions> 
